{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState, useCallback, useEffect } from 'react';\nimport AppLayout from '../components/AppLayout';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Calendar, Badge, DatePicker, Space, Input, Button } from 'antd';\nimport Head from 'next/head';\nimport Router from 'next/router';\nimport { ADD_CALENDAR_REQUEST, LOAD_CALENDAR_REQUEST, REMOVE_CALENDAR_REQUEST } from '../reducers/calendar';\n\nvar AllCalendar = function AllCalendar() {\n  var dispatch = useDispatch();\n\n  var _useSelector = useSelector(function (state) {\n    return state.user;\n  }),\n      isLoggedIn = _useSelector.isLoggedIn;\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.calendar;\n  }),\n      calendar = _useSelector2.calendar,\n      addCalendarLoading = _useSelector2.addCalendarLoading;\n\n  useEffect(function () {\n    if (!isLoggedIn) {\n      return Router.push('/login');\n    }\n\n    dispatch({\n      type: LOAD_CALENDAR_REQUEST\n    });\n  }, [isLoggedIn]);\n\n  if (!isLoggedIn) {\n    return '내 정보 로딩중...';\n  }\n\n  var _useState = useState(''),\n      text = _useState[0],\n      setText = _useState[1];\n\n  var _useState2 = useState('2021-01-01'),\n      selectDate = _useState2[0],\n      setSelectDate = _useState2[1];\n\n  var onChangeText = useCallback(function (e) {\n    setText(e.target.value);\n  }, [text]);\n\n  function getListData(value) {\n    var listData = calendar.filter(function (v) {\n      return v.date === value;\n    });\n    return listData || [];\n  }\n\n  var onSelect = useCallback(function (e) {\n    console.log(e.format('YYYY-MM-DD'));\n    setSelectDate(e.format('YYYY-MM-DD'));\n  }, [selectDate]); //temp\n\n  var onPanelChange = function onPanelChange() {\n    console.log('달 페이지 바뀌었음!');\n  }; //temp\n\n\n  var dateCellRender = useCallback(function (value) {\n    var listData = getListData(value.format('YYYY-MM-DD'));\n    return /*#__PURE__*/_jsx(\"ul\", {\n      style: {\n        paddingInlineStart: '0'\n      },\n      className: \"events\",\n      children: listData.map(function (item) {\n        return /*#__PURE__*/_jsx(\"li\", {\n          style: {\n            listStyle: 'none'\n          },\n          children: /*#__PURE__*/_jsx(Badge, {\n            status: \"success\",\n            text: item.content\n          })\n        }, item.content);\n      })\n    });\n  }, [calendar]);\n\n  var onChangeCal = function onChangeCal(date, dateString) {\n    setSelectDate(dateString);\n  }; //달력에 추가\n\n\n  var onSubmit = useCallback(function () {\n    var plus = {\n      date: selectDate,\n      type: 'success',\n      content: text\n    }; //임시로 id인덱스 부여, 디비 작업시 id 자동\n\n    console.log(plus);\n    dispatch({\n      type: ADD_CALENDAR_REQUEST,\n      data: plus\n    });\n  }, [selectDate, text, calendar]); //달력에 추가한거 삭제\n\n  var onDelete = useCallback(function () {\n    var deleteData = calendar.filter(function (e) {\n      return e.date === selectDate && e.content === text;\n    });\n\n    if (deleteData.length) {\n      dispatch({\n        type: REMOVE_CALENDAR_REQUEST,\n        data: {\n          id: deleteData[0].id\n        }\n      });\n    } else {\n      alert(\"날짜 또는 데이터를 확인하세요\");\n    }\n  }, [selectDate, calendar,,\n  /*tempData*/\n  text]);\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsxs(Head, {\n      children: [/*#__PURE__*/_jsx(\"meta\", {\n        charSet: \"utf-8\"\n      }), /*#__PURE__*/_jsx(\"title\", {\n        children: \"Calendar\"\n      })]\n    }), isLoggedIn && /*#__PURE__*/_jsxs(AppLayout, {\n      children: [/*#__PURE__*/_jsx(Space, {\n        direction: \"horizontal\",\n        children: /*#__PURE__*/_jsx(DatePicker, {\n          style: {\n            marginTop: '10px'\n          },\n          placeholder: selectDate,\n          onChange: onChangeCal\n        })\n      }), /*#__PURE__*/_jsx(Input, {\n        placeholder: \"\\uB2EC\\uB825\\uC5D0 \\uAE30\\uB85D\\uD558\\uC138\\uC694!\",\n        style: {\n          width: '300px',\n          marginTop: '10px'\n        },\n        name: \"text\",\n        value: text,\n        type: \"text\",\n        onChange: onChangeText,\n        required: true\n      }), /*#__PURE__*/_jsx(Button, {\n        style: {\n          marginTop: '10px'\n        },\n        loading: addCalendarLoading,\n        onClick: onSubmit,\n        children: \"\\uC785\\uB825\"\n      }), /*#__PURE__*/_jsx(Button, {\n        style: {\n          marginTop: '10px'\n        },\n        onClick: onDelete,\n        children: \"\\uC0AD\\uC81C\"\n      }), /*#__PURE__*/_jsx(Calendar, {\n        dateCellRender: dateCellRender,\n        onPanelChange: onPanelChange,\n        onSelect: onSelect\n      })]\n    })]\n  });\n};\n\nexport var __N_SSP = true;\nexport default AllCalendar;","map":null,"metadata":{},"sourceType":"module"}