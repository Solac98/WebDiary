{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useCallback, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport AppLayout from '../components/AppLayout';\nimport { Row, Col, Carousel, Button, Image, List } from 'antd';\nimport Link from 'next/link';\nimport axios from 'axios';\nimport styled from 'styled-components';\nimport { LOAD_MY_INFO_REQUEST, LOG_OUT_REQUEST } from '../reducers/user';\nimport wrapper from '../store/configureStore';\nimport { END } from 'redux-saga';\nimport { LOAD_BUCKET_REQUEST } from '../reducers/bucket';\nconst CustomItem = styled(List.Item).withConfig({\n  displayName: \"pages__CustomItem\",\n  componentId: \"sc-190qa7b-0\"\n})([\"margin:0;justify-content:center;padding:0;\"]);\nconst IMG1 = \"https://images.unsplash.com/photo-1579017308347-e53e0d2fc5e9?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=668&q=80\";\nconst IMG2 = \"https://images.unsplash.com/photo-1578909196400-59f8f8156a05?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=2775&q=80\";\n\nconst Home = () => {\n  const {\n    isLoggedIn,\n    user\n  } = useSelector(state => state.user);\n  const {\n    bucket\n  } = useSelector(state => state.bucket);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (isLoggedIn) {\n      dispatch({\n        type: LOAD_BUCKET_REQUEST\n      });\n    }\n  }, [isLoggedIn]); //LogOut Request\n\n  const onLogOut = useCallback(() => {\n    dispatch({\n      type: LOG_OUT_REQUEST\n    }, []);\n  }); //IsLoggedIn Render\n\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsx(AppLayout, {\n      children: /*#__PURE__*/_jsxs(Row, {\n        children: [/*#__PURE__*/_jsx(Col, {\n          xs: 24,\n          md: 12,\n          children: /*#__PURE__*/_jsxs(Carousel, {\n            style: {\n              width: '55%',\n              margin: '0 auto',\n              marginTop: '5%'\n            },\n            autoplay: true,\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              children: /*#__PURE__*/_jsx(Image, {\n                style: {\n                  width: '100%'\n                },\n                src: IMG1\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              children: /*#__PURE__*/_jsx(Image, {\n                style: {\n                  width: '100%'\n                },\n                src: IMG2\n              })\n            })]\n          })\n        }), /*#__PURE__*/_jsx(Col, {\n          xs: 24,\n          md: 12,\n          children: isLoggedIn ? /*#__PURE__*/_jsxs(\"div\", {\n            style: {\n              width: '60%',\n              margin: '0 auto',\n              marginTop: '5%'\n            },\n            children: [/*#__PURE__*/_jsx(\"h2\", {\n              style: {\n                textAlign: 'center'\n              },\n              children: \"\\uB098\\uC758 \\uBC84\\uD0B7\\uB9AC\\uC2A4\\uD2B8\"\n            }), /*#__PURE__*/_jsx(List, {\n              style: {\n                height: '400px',\n                overflow: 'scroll'\n              },\n              size: \"small\",\n              bordered: true,\n              dataSource: bucket,\n              renderItem: item => /*#__PURE__*/_jsx(CustomItem, {\n                children: item.content\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              style: {\n                width: '100%',\n                margin: '0 auto',\n                marginTop: '5%'\n              },\n              children: /*#__PURE__*/_jsx(Link, {\n                href: \"/\",\n                children: /*#__PURE__*/_jsx(Button, {\n                  shape: \"round\",\n                  style: {\n                    float: 'right'\n                  },\n                  onClick: onLogOut,\n                  children: \"\\uB85C\\uADF8\\uC544\\uC6C3\"\n                })\n              })\n            })]\n          }) : /*#__PURE__*/_jsxs(\"div\", {\n            style: {\n              width: '45%',\n              margin: '0 auto',\n              marginTop: '30%'\n            },\n            children: [/*#__PURE__*/_jsx(Link, {\n              href: \"/login\",\n              children: /*#__PURE__*/_jsx(Button, {\n                shape: \"round\",\n                children: \"\\uB85C\\uADF8\\uC778\"\n              })\n            }), /*#__PURE__*/_jsx(Link, {\n              href: \"/signup\",\n              children: /*#__PURE__*/_jsx(Button, {\n                shape: \"round\",\n                style: {\n                  float: 'right'\n                },\n                children: \"\\uD68C\\uC6D0\\uAC00\\uC785\"\n              })\n            })]\n          })\n        })]\n      })\n    })\n  });\n}; //SSR 적용 - getServerSidProps 사용\n\n\nexport const getServerSideProps = wrapper.getServerSideProps(async context => {\n  //Brower 에서 요청이 아닌 Front -> Back이므로 쿠키를 전달해줘야 한다.\n  console.log(context.req);\n  const cookie = context.req ? context.req.headers.cookie : '';\n  axios.defaults.headers.Cookie = ''; //cookie; //요청 헤더에 쿠키 넣기.\n\n  context.store.dispatch({\n    type: LOAD_MY_INFO_REQUEST\n  });\n  context.store.dispatch(END);\n  await context.store.sagaTask.toPromise();\n});\nexport default Home;","map":null,"metadata":{},"sourceType":"module"}